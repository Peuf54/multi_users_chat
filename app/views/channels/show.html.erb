<div class="row" data-controller="channel" data-channel-id="<%= @channel.id %>">
  <div class="col-sm-2">
    <div class="d-flex justify-content-between">
      <h5>Channels</h5>
      <%= link_to icon("fas", "plus"), new_channel_path %>
    </div>

    <% Channel.all.each do |channel| %>
      <div class="d-flex justify-content-between">
        <%= link_to channel.name, channel %>
        <% if current_user.channels.include?(channel) %>
          <%= link_to icon("fas", "times"), channel_channel_user_path(channel), method: :delete %>
        <% end %>
      </div>
    <% end %>

    <hr>

    <div class="d-flex justify-content-between">
      <h5>Users</h5>
    </div>
    <% @channel.users.each do |user| %>
      <div>
        <%= user.name %>
      </div>
    <% end %>

    <hr>

    <div class="d-flex justify-content-between">
      <h5>Bad Words</h5>
    </div>
      <% BAD_WORDS.each do |word| %>
        <p><%= word %></p>
      <% end %> 
  </div>

  <div class="col-sm-10">
    <div data-channel-target="messages">
      <%= render @channel.displayable_messages %>
    </div>

    <% if current_user.channels.include?(@channel) %>
      <%= form_with model: [@channel, Message.new], local: false, data: { action: "ajax:success->channel#clearInput" } do |f| %>
        <%= f.text_field :body, class: "form-control", data: { channel_target: "input" } %>
      <% end %>
    <% else %>
      <%= link_to "Join #{@channel.name}", channel_channel_users_path(@channel), method: :post %>
    <% end %>
  </div>
</div>